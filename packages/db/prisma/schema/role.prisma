model Role {
  id             String              @id @default(uuid())
  seq            Int                 @unique @default(autoincrement())
  createdAt      DateTime            @default(now()) @map("created_at")
  updatedAt      DateTime?           @updatedAt @map("updated_at") @db.Timestamptz(6)
  removedAt      DateTime?           @map("removed_at") @db.Timestamptz(6)
  name           Roles               @unique @default(USER)
  abilities      Ability[]
  assignments    Assignment[]
  associations   RoleAssociation[]
  classification RoleClassification?
  tenants        Tenant[]

  @@map("roles")
}

model RoleAssociation {
  id        String    @id @default(uuid())
  seq       Int       @unique @default(autoincrement())
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime? @updatedAt @map("updated_at") @db.Timestamptz(6)
  removedAt DateTime? @map("removed_at") @db.Timestamptz(6)
  roleId    String    @unique @map("role_id")
  groupId   String    @map("group_id")
  group     Group     @relation(fields: [groupId], references: [id])
  role      Role      @relation(fields: [roleId], references: [id])

  @@unique([groupId, roleId])
  @@map("role_associations")
}

model RoleClassification {
  id         String    @id @default(uuid())
  seq        Int       @unique @default(autoincrement())
  categoryId String    @map("category_id")
  roleId     String    @unique @map("role_id")
  createdAt  DateTime  @default(now()) @map("created_at")
  updatedAt  DateTime? @updatedAt @map("updated_at") @db.Timestamptz(6)
  removedAt  DateTime? @map("removed_at") @db.Timestamptz(6)
  category   Category  @relation(fields: [categoryId], references: [id])
  role       Role      @relation(fields: [roleId], references: [id])

  @@unique([categoryId, roleId])
  @@map("role_classifications")
}
