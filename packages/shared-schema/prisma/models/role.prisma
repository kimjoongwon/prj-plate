model Role {
  id             String              @id @default(uuid())
  seq            Int                 @unique @default(autoincrement())
  createdAt      DateTime            @default(now())
  updatedAt      DateTime?           @updatedAt @db.Timestamptz(6)
  removedAt      DateTime?           @db.Timestamptz(6)
  name           Roles               @unique @default(USER)
  abilities      Ability[]
  assignments    Assignment[]
  associations   RoleAssociation[]
  classification RoleClassification?
  tenants        Tenant[]
}

model RoleAssociation {
  id        String    @id @default(uuid())
  seq       Int       @unique @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt @db.Timestamptz(6)
  removedAt DateTime? @db.Timestamptz(6)
  roleId    String    @unique
  groupId   String
  group     Group     @relation(fields: [groupId], references: [id])
  role      Role      @relation(fields: [roleId], references: [id])

  @@unique([groupId, roleId])
}

model RoleClassification {
  id         String    @id @default(uuid())
  seq        Int       @unique @default(autoincrement())
  categoryId String
  roleId     String    @unique
  createdAt  DateTime  @default(now())
  updatedAt  DateTime? @updatedAt @db.Timestamptz(6)
  removedAt  DateTime? @db.Timestamptz(6)
  category   Category  @relation(fields: [categoryId], references: [id])
  role       Role      @relation(fields: [roleId], references: [id])

  @@unique([categoryId, roleId])
}
